<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boston Fire Safety Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.2/dist/tailwind.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!--     <style>
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }
        .header, .footer {
            background-color: #111;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .header-image {
            width: 100px;
            margin: 0 auto;
            display: block;
        }
        .section {
            padding: 40px 20px;
        }
        #mapid, #choroplethMap, #map {
            height: 500px;
            margin-top: 20px;
        }
        #mapid, #mapHydrant {
            height: 600px;
        }
      :root {
            --glitter: url("https://assets.codepen.io/13471/silver-glitter-background.png");
        }
        
        .fire::before,
        .fire::after {
            content: "";
            position: absolute;
            inset: 0;
        }
        
        .fire::before {
            background-image: var(--glitter), var(--glitter),
                linear-gradient(
                    0deg,
                    white 0px,
                    rgba(255, 137, 81, 0.8) 5px,
                    rgba(220, 188, 22, 0.6) 30%,
                    transparent 70%
                ),
                radial-gradient(ellipse at bottom, transparent 30%, black 60%);
            background-size: 350px 500px, 400px 650px, 100% 100%, 100% 100%;
            background-blend-mode: hard-light, color-dodge, multiply;
            background-position: 0px 0px, 0px 0px, var(--gradientPos);
            background-repeat: repeat, repeat, repeat, no-repeat;
            mix-blend-mode: color-dodge;
            filter: brightness(2.5) blur(7px) contrast(4);
            animation: fire 1.75s linear infinite;
            box-shadow: inset 0 -40px 50px -60px #63bbc5;
        }
        
        @keyframes fire {
            0% {
                background-position: center 0px, center 0px, 50% 100%, center center;
            }
            100% {
                background-position: center -500px, center -650px, 50% 100%, center center;
            }
        }
        
        html, body {
            min-width: 100%;
            min-height: 100%;
        }
        
        .fire {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
            z-index: 1;
        }
        
        .header {
            position: relative;
            z-index: 2;
            color: #fff; /* Change text color for better visibility */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); /* Add text shadow for better readability */
        }


        h1, h2 {
            text-align: center;
        }
        .center {  
        display: block;
        margin-right: auto;
        margin-left: auto;
        }  
    </style> -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100">

    <header class="header fire">
            <h1><img src="logo.png" class="header-image center" alt="Boston Fire Department Logo"></h1>
        <h1 class="text-3xl font-bold">Boston Fires</h1>
        <p>Educating for Safety, Preparing for Action</p>
    </header>

    <section class="section bg-white">
<!--         <h2 class="text-2xl font-semibold">Introduction</h2>
        <p class="mt-4">Welcome to "Boston Fires," an interactive web app designed to educate and prepare you for fire safety. Through this journey, you will explore fire incidents in Boston, understand the strategic placement of fire departments and hydrants, and gain valuable knowledge to combat fire hazards.</p>
        <h1>Welcome to "Boston Fires" üöíüî•</h1>-->
        <p>Welcome to <strong>"Boston Fires"</strong>, an interactive web application designed to educate and prepare you for fire safety. This educational journey allows you to explore fire incidents across Boston, understand the strategic placement of fire departments and hydrants, and equip yourself with essential knowledge to combat fire hazards. üè¢üî•</p>
        <p>Immerse yourself in the history with a special feature on the Great Boston Fire of 1872. Dive deep into how this monumental event shaped fire safety protocols today. üìöüî•</p>
        <p>Enjoy your exploration and stay safe! üöíüõ°Ô∏è</p>
    </section>

    <section class="section">
        <h1>The Great Fire of Boston: A Story of Resilience</h1>
        <h2>Chapter 1: The Fire Incident</h2>
        <p>It was a calm evening in November 1872, the streets of Boston were busy with merchants closing their shops and residents enjoying the brisk autumn air. The city, known for its intricate maze of narrow streets and brick buildings, was a hub of activity and prosperity. However, this calm was shattered at 7:20 PM on November 9th, when a small spark in a dry-goods store at the corner of Summer and Kingston Streets ignited a pile of wooden packing materials. Within moments, the fire spread rapidly, fueled by the flammable contents of the store.

        As the flames grew, they found new fuel in the adjacent buildings, most of which were constructed of wood and filled with combustible goods. The initial alarm rang out at 7:24 PM, and the first fire engines, pulled by teams of horses, clattered over the cobblestone streets towards the growing inferno.
        </p>

        <p>As we reflect on this historic blaze that reshaped Boston's fire safety measures, let's also explore the current number of fire incidents reported in Boston and examine the types of incidents that are most common today.</p>
        <h2>Fire Incident Data Visualizations</h2>
        <div class="chart-container">
            <canvas id="incidentTypeChart"></canvas>
        </div>
        <p style="text-align: center;" >You can change the chart type to line.</p><button id="toggleChartType">Toggle Chart Type</button>
        <p style="text-align: center;" >Want to know the TOP 10 reason reported? </p><button id="toggleTop10">Show Top 10 Incidents</button>
        <div id="topIncident"></div>

        <h2 class="text-2xl">Now, by examining the data, a question arises: Which neighborhood has reported the most incidents? To find this out, let's take a closer look with a pie chart.</h2>
        <div>
            <canvas id="neighborhoodPieChart" style="width: 700px; height: 700px; display: flex; justify-content: center; margin: 20px auto;"></canvas>
        </div>
    
<!--         <div id="quiz-section">
            <h2>Test Your Fire Safety Knowledge! üî•</h2>
            <div id="quiz"></div>
            <button class = "btnCSS" onclick="submitQuiz()">Submit</button>
    
            <div id="quiz-result"></div>
    
        </div> -->
    </section>
    
    <section class="section bg-white">
        <h2>Chapter 2: The Battle Against the Flames</h2>
        <p >The firefighters arrived quickly, but they were met with an overwhelming wall of fire. The strong winds carried embers from building to building, causing the fire to spread uncontrollably. Water pressure was low, and the existing fire hydrants were few and far between, making it difficult to combat the blaze effectively. As the fire advanced, it consumed everything in its path‚Äîshops, homes, warehouses‚Äîturning the vibrant cityscape into a scene of chaos and destruction.</p>
        <p >Firefighters from Boston and neighboring towns fought valiantly, pouring water onto the flames and creating firebreaks by demolishing buildings. Despite their tireless efforts, the fire raged through the night, casting an eerie glow over the city. The residents, in a state of panic, fled their homes, trying to save what little they could. The streets were filled with people, horses, and carts, all moving away from the relentless advance of the flames.</p>

        <h2 class="text-2xl">Once a fire spirals out of control, it becomes extremely challenging to manage. But what if we encounter a fire still in its early stages? What are the first steps we should take while waiting for firefighters to arrive? Let‚Äôs arm ourselves with knowledge. üî•üöí</h2>
    
        <h2 class="font-semibold">Test Your Fire Safety Knowledge!</h2>
        <div id="quiz-section" class="mt-4">
            <div id="quiz"></div>
            <button class="mt-4 px-4 py-2 bg-blue-500 text-white rounded" onclick="submitQuiz()">Submit</button>
            <div id="quiz-result"></div>
        </div>
    </section>

    <section class="section bg-white">
        <h2>Chapter 3: Government Response & Support</h2>
        <p>As dawn broke on November 10th, the extent of the devastation became apparent. The fire had consumed 65 acres of the city, destroying 776 buildings and causing an estimated $75 million in damages. Governor William B. Washburn immediately took action, coordinating with local officials and neighboring states to provide assistance. The state government set up relief funds and temporary shelters for the thousands of residents who had lost their homes and livelihoods.</p>
        <p>The Boston Fire Department, despite its own losses, continued to lead the firefighting efforts. Reinforcements arrived from cities as far away as New York and Providence, bringing much-needed manpower and equipment. Together, they battled the flames for nearly 20 hours before finally gaining control.</p>
        
        <h2 class="text-2xl font-semibold">Fire Departments</h2>
        <div id="mapid"></div>
    </section>

    <section class="section">
        <h2 class="text-2xl font-semibold">Fire Hydrants</h2>
        <select id="yearSelect">
        <option value="">Select a Manufacture Year</option>
        <!-- Options will be populated by JavaScript -->
    </select>
    <div id="mapHydrant"></div>
    </section>

    

    <footer class="footer">
        <p>Contact Information | Additional Resources</p>
    </footer>

    <script src="chart-script.js"></script>
    <script>
        // Fire Hydrants Map using Leaflet
        // var map = L.map('mapHydrant').setView([42.3601, -71.0589], 12);
        // L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        //     attribution: 'Map data ¬© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',
        //     maxZoom: 18,
        // }).addTo(map);

        // var markers = L.layerGroup().addTo(map);

        // function addMarkers(data) {
        //     markers.clearLayers();
        //     data.forEach(function(hydrant) {
        //         var marker = L.marker([hydrant.Y, hydrant.X]).bindPopup(
        //             'Hydrant ID: ' + hydrant._id + '<br>' +
        //             'Address: ' + hydrant.ADDRESS_NU + ' ' + hydrant.STREET_FEA
        //         );
        //         markers.addLayer(marker);
        //     });
        // }

        // document.getElementById('yearSelect').addEventListener('change', function() {
        //     var year = this.value;
        //     if (year) {
        //         var sqlQuery = encodeURIComponent(`SELECT * FROM "1479a183-dde0-46a6-a828-f526df010a03" WHERE "MANUFACTUR" LIKE '${year}'`);
        //         axios.get(`https://data.boston.gov/api/3/action/datastore_search_sql?sql=${sqlQuery}`)
        //             .then(function(response) {
        //                 addMarkers(response.data.result.records);
        //             })
        //             .catch(function(error) {
        //                 console.error('Error fetching data:', error);
        //             });
        //     } else {
        //         markers.clearLayers();
        //     }
        // });

        // // Initially fetch all data to populate year dropdown
        // var initialSql = encodeURIComponent(`SELECT * FROM "1479a183-dde0-46a6-a828-f526df010a03"`);
        // axios.get(`https://data.boston.gov/api/3/action/datastore_search_sql?sql=${initialSql}`)
        //     .then(function(response) {
        //         // Populate year dropdown from unique years in data
        //         var years = [...new Set(response.data.result.records.map(h => h.MANUFACTUR))];
        //         var select = document.getElementById('yearSelect');
        //         years.forEach(function(year) {
        //             var option = document.createElement('option');
        //             option.value = year;
        //             option.text = year;
        //             select.appendChild(option);
        //         });
        //     })
        //     .catch(function(error) {
        //         console.error('Error initializing data:', error);
        //     });

        // // Function to fetch data
        // async function fetchData(sqlQuery) {
        //     const url = `https://data.boston.gov/api/3/action/datastore_search_sql?sql=${encodeURIComponent(sqlQuery)}`;
        //     const response = await fetch(url);
        //     const data = await response.json();
        //     return data.result.records;
        // }

        // // Function to process data for a chart
        // function processData(records, key) {
        //     const counts = {};
        //     records.forEach(record => {
        //         if (record[key]) {
        //             counts[record[key]] = (counts[record[key]] || 0) + 1;
        //         }
        //     });
        //     return counts;
        // }

        // // Function to create a chart
        // function createChart(ctx, title, labels, data) {
        //     new Chart(ctx, {
        //         type: 'bar',
        //         data: {
        //             labels: labels,
        //             datasets: [{
        //                 label: title,
        //                 data: data,
        //                 backgroundColor: 'rgba(255, 99, 132, 0.2)',
        //                 borderColor: 'rgba(255, 99, 132, 1)',
        //                 borderWidth: 1
        //             }]
        //         },
        //         options: {
        //             scales: {
        //                 y: {
        //                     beginAtZero: true
        //                 }
        //             }
        //         }
        //     });
        // }

        // function setupQuiz() {
        //     const quiz = document.getElementById('quiz');
        //     quiz.innerHTML = '<p>What should you do if your clothes catch fire?</p>' +
        //                      '<input type="radio" id="stop" name="fire" value="stop"><label for="stop">Stop, Drop, and Roll</label><br>' +
        //                      '<input type="radio" id="run" name="fire" value="run"><label for="run">Run</label><br>';
        // }

        // function submitQuiz() {
        //     const answer = document.querySelector('input[name="fire"]:checked').value;
        //     alert(answer === "stop" ? "Correct!" : "Oops! The right answer is Stop, Drop, and Roll.");
        // }

        // // Main function to render charts
        // async function renderCharts() {
        //     const incidentTypeSql = `SELECT * from "91a38b1f-8439-46df-ba47-a30c48845e06" WHERE "incident_description" IS NOT NULL`;
        //     const districtSql = `SELECT * from "91a38b1f-8439-46df-ba47-a30c48845e06" WHERE "district" IS NOT NULL`;

        //     // Incident Type Chart
        //     const incidentRecords = await fetchData(incidentTypeSql);
        //     const incidentTypeCounts = processData(incidentRecords, 'incident_description');
        //     const incidentTypeCtx = document.getElementById('incidentTypeChart').getContext('2d');
        //     createChart(incidentTypeCtx, 'Incident Types', Object.keys(incidentTypeCounts), Object.values(incidentTypeCounts));

        //     // District Chart
        //     const districtRecords = await fetchData(districtSql);
        //     const districtCounts = processData(districtRecords, 'district');
        //     const districtCtx = document.getElementById('districtChart').getContext('2d');
        //     createChart(districtCtx, 'Incidents by District', Object.keys(districtCounts), Object.values(districtCounts));
        // }

        // renderCharts();
        // document.onload = setupQuiz();

        // // D3.js Map for Fire Hydrants
        // const svg = d3.select("#map").attr("width", 800).attr("height", 600);
        // const projection = d3.geoMercator()
        //                      .center([-71.0589, 42.3601]) // Longitude and latitude of Boston
        //                      .scale(100000) // Scale for zooming into the city
        //                      .translate([400, 300]);

        // const path = d3.geoPath().projection(projection);

        // // Fetch data from Boston Data API
        // d3.json(`https://data.boston.gov/api/3/action/datastore_search_sql?sql=SELECT * from "1479a183-dde0-46a6-a828-f526df010a03"`)
        //     .then(data => {
        //         const hydrants = data.result.records;
        //         hydrants.forEach(d => {
        //             if (!isNaN(parseFloat(d.Longitude)) && !isNaN(parseFloat(d.Latitude))) {
        //                 svg.append("circle")
        //                    .attr("cx", projection([parseFloat(d.Longitude), parseFloat(d.Latitude)])[0])
        //                    .attr("cy", projection([parseFloat(d.Longitude), parseFloat(d.Latitude)])[1])
        //                    .attr("r", 5)
        //                    .style("fill", "red")
        //                    .append("title")
        //                    .text(`ID: ${d._id}, Location: ${d.PLACEMENT_}`);
        //             }
        //         });
        //     })
        //     .catch(err => console.error('Error loading the map data:', err));
    </script>
</body>
</html>
